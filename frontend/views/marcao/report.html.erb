<%= setup_context(:title => I18n.t("marcao.report.title")) %>

<div class="row">
  <div class="col-md-2">
  </div>

  <div class="col-md-9">
    <div class="row">
      <div class="col-md-12">
        <div class="record-pane">
          <div class="readonly-context form-horizontal">

            <h2><%= I18n.t("marcao.report.title") %></h2>

            <section id="last_report">
              <h3><%= I18n.t("marcao.report.last_report_title") %></h3>

              <div class="form-group">
                <label class="col-sm-2 control-label"><%= I18n.t("marcao.report.status") %></label>
                <div class="col-sm-9 label-only"><%= @report['status'] %></div>
              </div>

              <% if @report['error'] %>
                <div class="form-group">
                  <label class="col-sm-2 control-label"><%= I18n.t("marcao.report.error") %></label>
                  <div class="col-sm-9 label-only"><%= @report['error'] %></div>
                </div>
              <% end %>

              <div class="form-group">
                <label class="col-sm-2 control-label"><%= I18n.t("marcao.report.last_success_at") %></label>
                <div class="col-sm-9 label-only"><%= @report['last_success_at'] || I18n.t("marcao.report.never") %></div>
              </div>

              <div class="form-group">
                <label class="col-sm-2 control-label"><%= I18n.t("marcao.report.export_started_at") %></label>
                <div class="col-sm-9 label-only"><%= @report['export_started_at'] %></div>
              </div>

              <div class="form-group">
                <label class="col-sm-2 control-label"><%= I18n.t("marcao.report.export_completed_at") %></label>
                <div class="col-sm-9 label-only"><%= @report['export_completed_at'] %></div>
              </div>

              <div class="form-group">
                <label class="col-sm-2 control-label"><%= I18n.t("marcao.report.resource_ids_selected") %></label>
                <div class="col-sm-9 label-only"><%= @report['resource_ids_selected'].join(', ') %></div>
              </div>

              <div class="form-group">
                <label class="col-sm-2 control-label"><%= I18n.t("marcao.report.archival_objects_exported") %></label>
                <div class="col-sm-9 label-only"><%= @report['archival_objects_exported'] %></div>
              </div>

              <div class="form-group">
                <label class="col-sm-2 control-label"><%= I18n.t("marcao.report.export_file") %></label>
                <div class="col-sm-9 label-only"><%= @report['export_file'] %></div>
              </div>

            </section>

            <section id="configuration">
              <h3><%= I18n.t("marcao.configuration.title") %></h3>

              <div class="form-group">
                <label class="col-sm-2 control-label"><%= I18n.t("marcao.configuration.schedule") %></label>
                <div class="col-sm-9 label-only"><%= AppConfig[:marcao_schedule] %></div>
              </div>

              <div class="form-group">
                <label class="col-sm-2 control-label"><%= I18n.t("marcao.configuration.flag_field") %></label>
                <div class="col-sm-9 label-only"><%= AppConfig[:marcao_flag_field] %></div>
              </div>

              <% if AppConfig[:marcao_sftp_enabled] %>
                <div class="form-group">
                  <label class="col-sm-2 control-label"><%= I18n.t("marcao.configuration.sftp_host") %></label>
                  <div class="col-sm-9 label-only"><%= AppConfig[:marcao_sftp_host] %></div>
                </div>

                <div class="form-group">
                  <label class="col-sm-2 control-label"><%= I18n.t("marcao.configuration.sftp_user") %></label>
                  <div class="col-sm-9 label-only"><%= AppConfig[:marcao_sftp_user] %></div>
                </div>

                <div class="form-group">
                  <label class="col-sm-2 control-label"><%= I18n.t("marcao.configuration.sftp_password") %></label>
                  <div class="col-sm-9 label-only">********</div>
                </div>

                <div class="form-group">
                  <label class="col-sm-2 control-label"><%= I18n.t("marcao.configuration.sftp_path") %></label>
                  <div class="col-sm-9 label-only"><%= AppConfig[:marcao_sftp_path] %></div>
                </div>

              <% else %>
                <div class="form-group">
                  <label class="col-sm-2 control-label"><%= I18n.t("marcao.configuration.sftp_enabled") %></label>
                  <div class="col-sm-9 label-only"><%= I18n.t("marcao.configuration.sftp_not_enabled") %></div>
                </div>
              <% end %>
            </section>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
